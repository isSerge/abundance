<!DOCTYPE html>
<html lang="en" dir="ltr" class="scroll-smooth" data-default-appearance="dark"
  data-auto-appearance="true"><head>
  <meta charset="utf-8" />
  
  <meta http-equiv="content-language" content="en" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="X-UA-Compatible" content="ie=edge" />
  
  <title>Thinking formally in terms of sidechains &middot; Project Abundance</title>
  <meta name="title" content="Thinking formally in terms of sidechains &middot; Project Abundance" />
  
  <meta name="description" content="Leveraging a formal framework for the construction of sidechains as a base for our design." />
  <meta name="keywords" content="status-update, consensus, " />
  
  
  <link rel="canonical" href="https://abundance.build/blog/2025-03-24-thinking-formally-in-terms-of-sidechains/" />
  
  
  
  
  
  
  
  
  
  
  
  
  <link type="text/css" rel="stylesheet" href="/css/main.bundle.min.287e81a49537dedc21182f74fc776560c33aed47b54480f49953677d157ce68eca1a80b93a580cb53c88be89d90adf2b305d9018290a26139bef037d0c777c0f.css"
    integrity="sha512-KH6BpJU33twhGC90/HdlYMM67Ue1RID0mVNnfRV85o7KGoC5OlgMtTyIvonZCt8rMF2QGCkKJhOb7wN9DHd8Dw==" />
  
  
  <script type="text/javascript" src="/js/appearance.min.516a16745bea5a9bd011138d254cc0fd3973cd55ce6e15f3dec763e7c7c2c7448f8fe7b54cca811cb821b0c7e12cd161caace1dd794ac3d34d40937cbcc9ee12.js"
    integrity="sha512-UWoWdFvqWpvQERONJUzA/TlzzVXObhXz3sdj58fCx0SPj&#43;e1TMqBHLghsMfhLNFhyqzh3XlKw9NNQJN8vMnuEg=="></script>
  
  
  
  
  
  
  
  <script defer type="text/javascript" id="script-bundle" src="/js/main.bundle.min.38829a2d46667b3048ed12a339f7a49584d39596241b4e61e344c689c257fec016f6e18ea8a349c0a7e2b35a3ef0ab2aed556a64100ada730fc9666da5b7c29a.js"
    integrity="sha512-OIKaLUZmezBI7RKjOfeklYTTlZYkG05h40TGicJX/sAW9uGOqKNJwKfis1o&#43;8Ksq7VVqZBAK2nMPyWZtpbfCmg==" data-copy="" data-copied=""></script>
  
  
  
  <script src="/lib/zoom/zoom.min.37d2094687372da3f7343a221a470f6b8806f7891aa46a5a03966af7f0ebd38b9fe536cb154e6ad28f006d184b294525a7c4054b6bbb4be62d8b453b42db99bd.js" integrity="sha512-N9IJRoc3LaP3NDoiGkcPa4gG94kapGpaA5Zq9/Dr04uf5TbLFU5q0o8AbRhLKUUlp8QFS2u7S&#43;Yti0U7QtuZvQ=="></script>
  
  
  
  <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png" />
  <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png" />
  <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png" />
  <link rel="manifest" href="/site.webmanifest" />
  
  
  
  
  
  
  
  
  <meta property="og:title" content="Thinking formally in terms of sidechains" />
<meta property="og:description" content="Leveraging a formal framework for the construction of sidechains as a base for our design." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://abundance.build/blog/2025-03-24-thinking-formally-in-terms-of-sidechains/" /><meta property="article:section" content="blog" />
<meta property="article:published_time" content="2025-03-24T00:00:00+00:00" />
<meta property="article:modified_time" content="2025-03-24T00:00:00+00:00" />


  <meta name="twitter:card" content="summary"/><meta name="twitter:title" content="Thinking formally in terms of sidechains"/>
<meta name="twitter:description" content="Leveraging a formal framework for the construction of sidechains as a base for our design."/>

  
  <script type="application/ld+json">
  [{
    "@context": "https://schema.org",
    "@type": "Article",
    "articleSection": "Blog",
    "name": "Thinking formally in terms of sidechains",
    "headline": "Thinking formally in terms of sidechains",
    "description": "Leveraging a formal framework for the construction of sidechains as a base for our design.",
    "abstract": "\u003cp\u003eOverall, I am really happy with the progress I\u0026rsquo;ve made this week. I\u0026rsquo;ve been mainly focused on unravelling one of the\npapers that I mentioned in my last update, \u003ca href=\u0022https:\/\/eprint.iacr.org\/2018\/1239.pdf\u0022 target=\u0022_blank\u0022\u003eProof-of-Stake Sidechains\u003c\/a\u003e. While is\ntrue that we don\u0026rsquo;t want our system to have anything to do with PoS, and there is no 1:1 matching of the concepts from\nthe paper with what we are trying to build, the paper presents a framework that can come pretty handy to evaluate the\ncorrectness of our designs. This paper is from 2018, and after a first pass the first thing that I did is to check if\nthere were any follow-up papers that built upon the abstractions of this paper. I came\nacross \u003ca href=\u0022https:\/\/eprint.iacr.org\/2018\/1048.pdf\u0022 target=\u0022_blank\u0022\u003eProof-of-Work Sidechains\u003c\/a\u003e from the same authors, but without a doubt, the\nmost complete proposal is the one that I started with. Let\u0026rsquo;s dive right into it.\u003c\/p\u003e",
    "inLanguage": "en",
    "url" : "https:\/\/abundance.build\/blog\/2025-03-24-thinking-formally-in-terms-of-sidechains\/",
    "author" : {
      "@type": "Person",
      "name": ""
    },
    "copyrightYear": "2025",
    "dateCreated": "2025-03-24T00:00:00\u002b00:00",
    "datePublished": "2025-03-24T00:00:00\u002b00:00",
    
    "dateModified": "2025-03-24T00:00:00\u002b00:00",
    
    "keywords": ["status-update","consensus"],
    
    "mainEntityOfPage": "true",
    "wordCount": "1812"
  }]
  </script>


  
  
  
  
  

<script src="/lib/jquery/jquery.slim.min.b0dca576e87d7eaa5850ae4e61759c065786cdb6489d68fcc82240539eebd5da522bdb4fda085ffd245808c8fe2acb2516408eb774ef26b5f6015fc6737c0ea8.js" integrity="sha512-sNylduh9fqpYUK5OYXWcBleGzbZInWj8yCJAU57r1dpSK9tP2ghf/SRYCMj&#43;KsslFkCOt3TvJrX2AV/Gc3wOqA=="></script>






















  
  



  
  
  <meta name="theme-color"/>
  
  
</head>
<body
  class="flex flex-col h-screen px-6 m-auto text-lg leading-7 max-w-7xl bg-neutral text-neutral-900 dark:bg-neutral-800 dark:text-neutral sm:px-14 md:px-24 lg:px-32 scrollbar-thin scrollbar-track-neutral-200 scrollbar-thumb-neutral-400 dark:scrollbar-track-neutral-800 dark:scrollbar-thumb-neutral-600">
  <div id="the-top" class="absolute flex self-center">
    <a class="px-3 py-1 text-sm -translate-y-8 rounded-b-lg bg-primary-200 focus:translate-y-0 dark:bg-neutral-600"
      href="#main-content"><span
        class="font-bold text-primary-600 ltr:pr-2 rtl:pl-2 dark:text-primary-400">&darr;</span>Skip to main content</a>
  </div>
  
  
  <div style="padding-left:0;padding-right:0;padding-top:2px;padding-bottom:3px"
    class="main-menu flex items-center justify-between px-4 py-6 sm:px-6 md:justify-start gap-x-3">
    
    <div class="flex flex-1 items-center justify-between">
        <nav class="flex space-x-3">

            
            <a href="/" class="text-base font-medium text-gray-500 hover:text-gray-900">Project Abundance</a>
            

        </nav>
        <nav class="hidden md:flex items-center gap-x-5 md:ml-12 h-12">

            

            


            


            
            

        </nav>
        <div class="flex md:hidden items-center gap-x-5 md:ml-12 h-12">

            <span></span>

            


            

            
            

        </div>
    </div>
    <div class="-my-2 md:hidden">

        <label id="menu-button" class="block">
            

            </div>
        </label>
    </div>
</div>





  
  <div class="relative flex flex-col grow">
    <main id="main-content" class="grow">
      


<article>
  

  <header id="single_header" class="mt-5 max-w-prose">
    
    <h1 class="mt-0 text-4xl font-extrabold text-neutral-900 dark:text-neutral">
      Thinking formally in terms of sidechains
    </h1>
    <div class="mt-1 mb-6 text-base text-neutral-500 dark:text-neutral-400 print:hidden">
      





  
  







  







  









  





<div class="flex flex-row flex-wrap items-center">
  
  
  <time datetime="2025-03-24T00:00:00&#43;00:00">24 March 2025</time><span class="px-2 text-primary-500">&middot;</span><span title="Reading time">9 mins</span><span class="px-2 text-primary-500">&middot;</span>


  
  

<span class="mb-[2px]">
  <a
    href="https://github.com/nazar-pc/abundance/tree/main/website/main/content/blog/2025-03-24-sidechains-merging-histories.md"
    class="text-lg hover:text-primary-500"
    rel="noopener noreferrer"
    target="_blank"
    title="Edit content"
    ><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" height="1em" viewBox="0 0 512 512"><path fill="currentColor" d="M441 58.9L453.1 71c9.4 9.4 9.4 24.6 0 33.9L424 134.1 377.9 88 407 58.9c9.4-9.4 24.6-9.4 33.9 0zM209.8 256.2L344 121.9 390.1 168 255.8 302.2c-2.9 2.9-6.5 5-10.4 6.1l-58.5 16.7 16.7-58.5c1.1-3.9 3.2-7.5 6.1-10.4zM373.1 25L175.8 222.2c-8.7 8.7-15 19.4-18.3 31.1l-28.6 100c-2.4 8.4-.1 17.4 6.1 23.6s15.2 8.5 23.6 6.1l100-28.6c11.8-3.4 22.5-9.7 31.1-18.3L487 138.9c28.1-28.1 28.1-73.7 0-101.8L474.9 25C446.8-3.1 401.2-3.1 373.1 25zM88 64C39.4 64 0 103.4 0 152V424c0 48.6 39.4 88 88 88H360c48.6 0 88-39.4 88-88V312c0-13.3-10.7-24-24-24s-24 10.7-24 24V424c0 22.1-17.9 40-40 40H88c-22.1 0-40-17.9-40-40V152c0-22.1 17.9-40 40-40H200c13.3 0 24-10.7 24-24s-10.7-24-24-24H88z"/></svg>
  </span>

</span></a
  >
</span>
  

  
  
</div>





<div class="flex flex-row flex-wrap items-center">
  
  
  
  
  
  
  
  
  
  
  
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/status-update/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    status-update
  </span>
</span>
  </span>
  
  <span style="margin-top:0.5rem" class="mr-2" onclick="window.open(&#34;/tags/consensus/&#34;,'_self');return false;">
    <span class="flex" style="cursor: pointer;">
  <span class="rounded-md border border-primary-400 px-1 py-[1px] text-xs font-normal text-primary-700 dark:border-primary-600 dark:text-primary-400">
    consensus
  </span>
</span>
  </span>
  
  
  
  
</div>




    </div>

    
    
    
    
    

    

    
      
      
        
        
<div class="flex author">
  
  <div class="place-self-center">
    
    
    <div class="text-2xl sm:text-lg">
</div>
  </div>
</div>

      

      
        
            
              
            
          
            
          
          
<div class="flex author author-extra mt-4">
  
      
      
        
        
          
        
        <img class="!mt-0 !mb-0 h-24 w-24 rounded-full ltr:mr-4 rtl:ml-4" width="96" height="96"
          src="/f1c66b8937bd6938a029cea2fdb21d9b_11830693318423645857_hub6732557046a315fb6ae5af5fcfe2a41_95396_192x192_fill_box_center_3.png" />
      
  
  <div class="place-self-center">
    
    
    <div class="text-[0.6rem] uppercase leading-3 text-neutral-500 dark:text-neutral-400">
      Author
    </div>
    <a  href="https://abundance.build/authors/adlrocha/"  class="font-semibold leading-6 text-neutral-800 dark:text-neutral-300">
      Alfonso de la Rocha
    </a>
    
    
    <div class="text-2xl sm:text-lg">
      <div class="flex flex-wrap text-neutral-400 dark:text-neutral-500">
        
        
        <a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href="https://linkedin.com/in/adlrocha" target="_blank"
          aria-label="Linkedin" rel="me noopener noreferrer"><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3zM135.4 416H69V202.2h66.5V416zm-33.2-243c-21.3 0-38.5-17.3-38.5-38.5S80.9 96 102.2 96c21.2 0 38.5 17.3 38.5 38.5 0 21.3-17.2 38.5-38.5 38.5zm282.1 243h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9V416z"/></svg>

  </span>

</span></a>
        
        
        
        <a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href="https://x.com/adlrocha" target="_blank"
          aria-label="X-Twitter" rel="me noopener noreferrer"><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M389.2 48h70.6L305.6 224.2 487 464H345L233.7 318.6 106.5 464H35.8L200.7 275.5 26.8 48H172.4L272.9 180.9 389.2 48zM364.4 421.8h39.1L151.1 88h-42L364.4 421.8z"/></svg>
  </span>

</span></a>
        
        
        
        <a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href="https://github.com/adlrocha" target="_blank"
          aria-label="Github" rel="me noopener noreferrer"><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><path fill="currentColor" d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg>

  </span>

</span></a>
        
        
        
        <a class="px-1 hover:text-primary-700 dark:hover:text-primary-400" href="mailto:me@adlrocha.com" target="_blank"
          aria-label="Email" rel="me noopener noreferrer"><span class="inline-block align-text-bottom">

  <span class="relative block icon">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><path fill="currentColor" d="M207.8 20.73c-93.45 18.32-168.7 93.66-187 187.1c-27.64 140.9 68.65 266.2 199.1 285.1c19.01 2.888 36.17-12.26 36.17-31.49l.0001-.6631c0-15.74-11.44-28.88-26.84-31.24c-84.35-12.98-149.2-86.13-149.2-174.2c0-102.9 88.61-185.5 193.4-175.4c91.54 8.869 158.6 91.25 158.6 183.2l0 16.16c0 22.09-17.94 40.05-40 40.05s-40.01-17.96-40.01-40.05v-120.1c0-8.847-7.161-16.02-16.01-16.02l-31.98 .0036c-7.299 0-13.2 4.992-15.12 11.68c-24.85-12.15-54.24-16.38-86.06-5.106c-38.75 13.73-68.12 48.91-73.72 89.64c-9.483 69.01 43.81 128 110.9 128c26.44 0 50.43-9.544 69.59-24.88c24 31.3 65.23 48.69 109.4 37.49C465.2 369.3 496 324.1 495.1 277.2V256.3C495.1 107.1 361.2-9.332 207.8 20.73zM239.1 304.3c-26.47 0-48-21.56-48-48.05s21.53-48.05 48-48.05s48 21.56 48 48.05S266.5 304.3 239.1 304.3z"/></svg>

  </span>

</span></a>
        
        
      </div>
    </div>
  </div>
</div>


      
      <div class="mb-5"></div>
      

    

  </header>
  
  <section class="flex flex-col max-w-full mt-0 prose dark:prose-invert lg:flex-row">
    
    

      <div class="min-w-0 min-h-0 max-w-fit">
        
        


        <div class="article-content max-w-prose mb-20">
          <p>Overall, I am really happy with the progress I&rsquo;ve made this week. I&rsquo;ve been mainly focused on unravelling one of the
papers that I mentioned in my last update, <a href="https://eprint.iacr.org/2018/1239.pdf" target="_blank">Proof-of-Stake Sidechains</a>. While is
true that we don&rsquo;t want our system to have anything to do with PoS, and there is no 1:1 matching of the concepts from
the paper with what we are trying to build, the paper presents a framework that can come pretty handy to evaluate the
correctness of our designs. This paper is from 2018, and after a first pass the first thing that I did is to check if
there were any follow-up papers that built upon the abstractions of this paper. I came
across <a href="https://eprint.iacr.org/2018/1048.pdf" target="_blank">Proof-of-Work Sidechains</a> from the same authors, but without a doubt, the
most complete proposal is the one that I started with. Let&rsquo;s dive right into it.</p>
<h2 class="relative group">Thinking in terms of sidechains. 
    <div id="thinking-in-terms-of-sidechains" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#thinking-in-terms-of-sidechains" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>What I liked the most about this work is that it presents a formal framework to reason about the interaction between
different blockchain networks through the construction of sidechains. The paper focuses on PoS sidechains, but the
concepts and the security model is general enough to be easily adaptable for other constructions like rollups, bridges,
beacon chains and execution layers, or in our case, a hierarchical architecture of Nakamoto-based consensus networks.</p>
<p>I would highly recommend everyone to read this paper if you are interested in the topic, but I will try to summarise the
core primitives that I found more interesting and that I am planning to leverage (either for inspiration or to evaluate
the correctness of our designs):</p>
<ul>
<li>
<dl>
<dt><em>A formalised security framework for sidechains</em></dt>
<dd>This is whithout a doubt one of the most relevant contributions of the paper. They formalise the concept of
sidechains, present formal concepts for many of the primitives that are used in the construction of sidechains, and
present a security and adversarial models that can be used to reason about the security of the system.</dd>
</dl>
<ul>
<li><em>Merged staking v.s. independent staking</em>: The paper presents two different models for the staking mechanism in
sidechains. In the merged staking model, sidechains can leverage part of the staking power from the main chain to
secure the network, i.e., the security of the sidechain is directly tied to the security of the main chain as some
validators in the main chain also participate in the sidechain consensus. In the independent staking model, sidechains
have their own staking mechanism, and their security is independent of the security of the main chain. The benefit of
the merged staking model is that it helps preventing &ldquo;goldfinger attacks&rdquo; against sidechains with a small staking
power.</li>
<li><em>Direct observation v.s. certified-based observation</em>: It also introduces two different models for the relationship
between sidechain and the flow of verifiable information between them. In the direct observation model, the sidechain
directly observes the main chain, i.e. it participates as a full node of the sidechain and stores and verifies every
state update in that network; while in the certified-based observation model, participants of other chains do not
store all the state of a sidechain, and they rely on succint proofs (i.e. certificates) to verify the state of the a
sidechain. In the paper, they present what they call an ad-hoc threshold multisignatures (ATMS) construction to enable
the certified-based observation model.</li>
<li><em>Firewall property</em>: The paper presents a formal definition of the firewall requirement that a sidechain must
satisfy to ensure that the security of the main chain is not compromised by the sidechain. This property ensures that
if a sidechain is compromised, the impact the attack can have over the main chain or other sidechains in the system is
limited by the inflow of assets. The firewall property allows relying on an arbitrary definition of exactly how assets
can correctly be moved back and forth between the two chains, we capture this by a so-called validity language. In
case of failure, the firewall ensures that transfers from the sidechain into the main chain are rejected unless there
exists a (not necessarily unique) plausible history of events on the sidechain that could, in case the sidechain
was still secure, cause the particular transfers to take place.</li>
<li><em>Merge operator</em>: It also presents abstractly the use of a merge operator that allow to sequentialise a set of
transactions of two independent chains. <code>merge</code> allows us to create a combined view of multiple ledgers, putting all
of the transactions across multiple ledgers into a linear ordering.</li>
<li>Finally, they show how their sidechain construction framework (i) supports safe cross-chain value transfers when the
security assumptions of both chains are satisfied, namely that a majority of honest stake exists in both chains, and (
ii) in case of a one-sided failure, maintains the firewall property, thus containing the damage to the chains whose
security conditions have been violated.</li>
</ul>
</li>
</ul>


<h2 class="relative group">What does all of this involve for design of our system? 
    <div id="what-does-all-of-this-involve-for-design-of-our-system" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#what-does-all-of-this-involve-for-design-of-our-system" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>Inspired by the concepts from above, and after doing another thorough review
into <a href="https://subspace.github.io/protocol-specs/docs/consensus/consensus_chain" target="_blank">Subspace&rsquo;s consensus protocol</a> (once
again, thank you Nazar for clarifying the rationale behind the design of some of the parts of the protocol) I started to
think about the different primitives that our design should have. These are still high-level ideas, but I am already
working to flesh out the design.</p>
<ul>
<li>If you recall from my <a href="../2025-03-16-architecture-to-scale">previous update</a>, our system will use an architecture
composed by different layers of independent but interconnected chains (or shards), with the first layer being the
global consensus (or main chain) responsible for orchestrating all the lower layers.</li>
<li>We will adopt for our design an approach similar to the one presented for merged staking. All the farmers (we may also
use consensus participants to refer to them more abstractly) dedicate their power to secure the global consensus, and
they are also randomly assigned to participant and secure the consensus of the lower layers (by proposing and
validating lower layer blocks). How I am planning to design this is that when a farmer audits its space to see if any
of their chunks has a winning ticket to propose a block in the global consensus, they also check if they have a
winning ticket to propose a block in any of the lower layers.</li>
<li>To synchronise the different layers, I am planning to use a similar concept to that of epochs and slots. An epoch is a
fixed period of time that is divided into slots. Each slot is assigned to a farmer that is responsible for proposing a
block in the global consensus, and also for proposing a block in the lower layers. The global consensus will be
responsible for orchestrating the assignment of slots to farmers in the lower layers, and for ensuring that the blocks
proposed by the farmers in the lower layers are correctly included in the global consensus. Subspace already
introduces an analogous approach through its proof-of-time that we may be able to leverage.</li>
<li>We want Proof-of-Archival-Storage (PoAS) to apply to all the layers in the architecture, so that we can also use
Proof-of-Space (PoSpace) for Sybil resistance. This is a key property that we want to maintain in our design, and one
of the key things to figure out is how the protocol should work so that the history of all shards is archived and
efficiently load balanced throughout the network to ensure their permanence and availability.</li>
<li>In terms of chain observability, I expect that the lower layers will operate in a direct observation model, where they
directly observe the global consensus, and they store and verify every state update in that network. We have an
advantage here though, by using PoAS we make a the history of the shards available to all farmers, so that they can
easily verify the state of the lower layers off-band if needed.</li>
<li>Which brings me to the firewall property. In the paper when a sidechain fails, it is not recovering after that. The
firewall property limits the impact of the attack, but there is no mechanism to make the sidechain operational again.
In our case, the fact that we are archiving the history of all shards, and that we rely on a probabilistic consensus
for their operation, will allow us to introduce a mechanism to recover from a failure of a shard. Thus, we want adopt
the firewall property as described in the paper for our design and will try to come up with a stricter recovery
property and mechanism.</li>
<li>On top of all of this (and this is not something that I am currently considering as a high-priority) I am thinking
about introducing the concept of a merge operator that allow to easily interleave the histories (or a subset of the
history) between different shards. This operator will potentially be tightly coupled with
the <a href="/book/Execution_environment/Contracts_overview.html">execution model</a> that Nazar is working on, but I think that
the modular approach that he is following can really help us to come up with a design that is flexible and that can be
easily adapted to the different needs of the applications that will run on top of our system.</li>
<li>Finally, the paper introduces the concepts of 2-way-pegs, cross-chain transactions, and the ability to perform atomic
exchange of assets between chains. In our case, we are planning to limit the cross-shard operations to basic atomic
primitives that allow to burn and mint tokens. This basic operation can be combined to construct more complex
cross-chain operations by application developers. These operations will also be tightly coupled with the smart
contract execution model (and already have many ideas on how to implement them), but I expect this to allow complex
operation like the atomic execution of transactions involving states from two shards. In the scope of this, I had a
few interesting discussions with Nazar about how addressing will work in our system, and how transactions would be
queued for validations and routed throughout the hierarchy.</li>
<li>As a side-note, I am leaving block rewards and the incentive model out of scope for this discussion for now, but I
just want to let you know that we&rsquo;ve also started thinking a little bit about this.</li>
</ul>


<h2 class="relative group">What&rsquo;s next? 
    <div id="whats-next" class="anchor"></div>
    
    <span
        class="absolute top-0 w-6 transition-opacity opacity-0 ltr:-left-6 rtl:-right-6 not-prose group-hover:opacity-100">
        <a class="group-hover:text-primary-300 dark:group-hover:text-neutral-700"
            style="text-decoration-line: none !important;" href="#whats-next" aria-label="Anchor">#</a>
    </span>        
    
</h2>
<p>First of all let me thank you for reading this far. This update ended up becoming a little bit longer than usual, but I
wanted to share all the disconnected notes that I&rsquo;ve been taking throughout the week. With all of these high-level ideas
in mind, this week I am planning to focus on designing in detail the proposal of blocks in the main chain and lower
level shards, and the archival of storage of the history of the shards. I think that with this we can start thinking
about the implementation of the core protocol so we can surface issues or other things that need further design, while
we work in parallel in detailing the rest of the system mechanics. Until next week!</p>
          
          
          
        </div>
        
        

        
        

          
      </div>
     
      
      
        
        
          
          
        
      <script>
        var oid = "views_blog\/2025-03-24-sidechains-merging-histories.md"
        var oid_likes = "likes_blog\/2025-03-24-sidechains-merging-histories.md"
      </script>
      
      
      <script type="text/javascript" src="/js/page.min.b06a29d42a4ed16787978e2eee1e8c797b7698db2bc14ccee78f5c80ac566fc996190a73ad80a5e987558474b20b96fa38f7d85b405f165ff72b7b163c5ad11b.js" integrity="sha512-sGop1CpO0WeHl44u7h6MeXt2mNsrwUzO549cgKxWb8mWGQpzrYCl6YdVhHSyC5b6OPfYW0BfFl/3K3sWPFrRGw=="></script>
      
  
    </section>
  <footer class="pt-8 max-w-prose print:hidden">

    
  
    
    
    
    <div class="pt-8">
      <hr class="border-dotted border-neutral-300 dark:border-neutral-600" />
      <div class="flex justify-between pt-3">
        <span>
          
            <a class="flex group mr-3" href="/blog/2025-03-17-way-faster-transactions-and-no-panic/">
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Way faster transactions and no-panic</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-03-17T00:00:00&#43;00:00">17 March 2025</time>
                  
                </span>
              </span>
            </a>
          
        </span>
        <span>
          
            <a class="flex text-right group ml-3" href="/blog/2025-03-31-multi-shard-subspace-protocol/">
              <span class="flex flex-col">
                <span
                  class="mt-[0.1rem] leading-6 group-hover:underline group-hover:decoration-primary-500"
                  >Multi-shard Subspace Protocol</span
                >
                <span class="mt-[0.1rem] text-xs text-neutral-500 dark:text-neutral-400">
                  
                    <time datetime="2025-03-31T00:00:00&#43;00:00">31 March 2025</time>
                  
                </span>
              </span>
              <span
                class="ml-3 text-neutral-700 group-hover:text-primary-600 ltr:inline rtl:hidden dark:text-neutral dark:group-hover:text-primary-400"
                >&rarr;</span
              >
              <span
                class="mr-3 text-neutral-700 group-hover:text-primary-600 ltr:hidden rtl:inline dark:text-neutral dark:group-hover:text-primary-400"
                >&larr;</span
              >
            </a>
          
        </span>
      </div>
    </div>
  


    
  </footer>
</article>

      <div id="top-scroller" class="pointer-events-none absolute top-[110vh] bottom-0 w-12 ltr:right-0 rtl:left-0">
  <a href="#the-top"
    class="pointer-events-auto sticky top-[calc(100vh-5.5rem)] flex h-12 w-12 mb-16 items-center justify-center rounded-full bg-neutral/50 text-xl text-neutral-700 hover:text-primary-600 dark:bg-neutral-800/50 dark:text-neutral dark:hover:text-primary-400"
    aria-label="Scroll to top" title="Scroll to top">
    &uarr;
  </a>
</div>
    </main><footer id="site-footer" class="py-10 print:hidden">
  
  
    
  
  <div class="flex items-center justify-between">

    
    
    <p class="text-sm text-neutral-500 dark:text-neutral-400">
      <a href="https://creativecommons.org/publicdomain/zero/1.0/" target="_blank" rel="license noopener noreferrer">CC0 1.0 Universal</a>
    </p>
    

    
    
    <p class="text-xs text-neutral-500 dark:text-neutral-400">
      
      
      Powered by <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://gohugo.io/" target="_blank" rel="noopener noreferrer">Hugo</a> &amp; <a class="hover:underline hover:decoration-primary-400 hover:text-primary-500"
        href="https://blowfish.page/" target="_blank" rel="noopener noreferrer">Blowfish</a>
    </p>
    

  </div>
  <script>
    
    mediumZoom(document.querySelectorAll("img:not(.nozoom)"), {
      margin: 24,
      background: 'rgba(0,0,0,0.5)',
      scrollOffset: 0,
    })
    
  </script>
  
  
  <script type="text/javascript" src="/js/process.min.62060bb247f4de2b6dde45903668fefb68d792f365587605177b1227c0cf43588701edaca0cb40e2c8e2789bd5ce67c1d2a215b9fb258c3496a7cd25e7cb5fdf.js" integrity="sha512-YgYLskf03itt3kWQNmj&#43;&#43;2jXkvNlWHYFF3sSJ8DPQ1iHAe2soMtA4sjieJvVzmfB0qIVufsljDSWp80l58tf3w=="></script>
  
  
</footer>

  </div>
</body>

</html>
